{"ast":null,"code":"'use strict';\n\nconst id = require('../../id');\n\nconst DatadogSpanContext = require('../span_context');\n\nclass LogPropagator {\n  constructor(config) {\n    this._config = config;\n  }\n\n  inject(spanContext, carrier) {\n    if (!carrier) return;\n    carrier.dd = {};\n\n    if (spanContext) {\n      carrier.dd.trace_id = spanContext.toTraceId();\n      carrier.dd.span_id = spanContext.toSpanId();\n    }\n\n    if (this._config.service) carrier.dd.service = this._config.service;\n    if (this._config.version) carrier.dd.version = this._config.version;\n    if (this._config.env) carrier.dd.env = this._config.env;\n  }\n\n  extract(carrier) {\n    if (!carrier || !carrier.dd || !carrier.dd.trace_id || !carrier.dd.span_id) {\n      return null;\n    }\n\n    const spanContext = new DatadogSpanContext({\n      traceId: id(carrier.dd.trace_id, 10),\n      spanId: id(carrier.dd.span_id, 10)\n    });\n    return spanContext;\n  }\n\n}\n\nmodule.exports = LogPropagator;","map":{"version":3,"sources":["/Users/danielcalderon/vinology/Vinology-client/node_modules/dd-trace/packages/dd-trace/src/opentracing/propagation/log.js"],"names":["id","require","DatadogSpanContext","LogPropagator","constructor","config","_config","inject","spanContext","carrier","dd","trace_id","toTraceId","span_id","toSpanId","service","version","env","extract","traceId","spanId","module","exports"],"mappings":"AAAA;;AAEA,MAAMA,EAAE,GAAGC,OAAO,CAAC,UAAD,CAAlB;;AACA,MAAMC,kBAAkB,GAAGD,OAAO,CAAC,iBAAD,CAAlC;;AAEA,MAAME,aAAN,CAAoB;AAClBC,EAAAA,WAAW,CAAEC,MAAF,EAAU;AACnB,SAAKC,OAAL,GAAeD,MAAf;AACD;;AAEDE,EAAAA,MAAM,CAAEC,WAAF,EAAeC,OAAf,EAAwB;AAC5B,QAAI,CAACA,OAAL,EAAc;AAEdA,IAAAA,OAAO,CAACC,EAAR,GAAa,EAAb;;AAEA,QAAIF,WAAJ,EAAiB;AACfC,MAAAA,OAAO,CAACC,EAAR,CAAWC,QAAX,GAAsBH,WAAW,CAACI,SAAZ,EAAtB;AACAH,MAAAA,OAAO,CAACC,EAAR,CAAWG,OAAX,GAAqBL,WAAW,CAACM,QAAZ,EAArB;AACD;;AAED,QAAI,KAAKR,OAAL,CAAaS,OAAjB,EAA0BN,OAAO,CAACC,EAAR,CAAWK,OAAX,GAAqB,KAAKT,OAAL,CAAaS,OAAlC;AAC1B,QAAI,KAAKT,OAAL,CAAaU,OAAjB,EAA0BP,OAAO,CAACC,EAAR,CAAWM,OAAX,GAAqB,KAAKV,OAAL,CAAaU,OAAlC;AAC1B,QAAI,KAAKV,OAAL,CAAaW,GAAjB,EAAsBR,OAAO,CAACC,EAAR,CAAWO,GAAX,GAAiB,KAAKX,OAAL,CAAaW,GAA9B;AACvB;;AAEDC,EAAAA,OAAO,CAAET,OAAF,EAAW;AAChB,QAAI,CAACA,OAAD,IAAY,CAACA,OAAO,CAACC,EAArB,IAA2B,CAACD,OAAO,CAACC,EAAR,CAAWC,QAAvC,IAAmD,CAACF,OAAO,CAACC,EAAR,CAAWG,OAAnE,EAA4E;AAC1E,aAAO,IAAP;AACD;;AAED,UAAML,WAAW,GAAG,IAAIN,kBAAJ,CAAuB;AACzCiB,MAAAA,OAAO,EAAEnB,EAAE,CAACS,OAAO,CAACC,EAAR,CAAWC,QAAZ,EAAsB,EAAtB,CAD8B;AAEzCS,MAAAA,MAAM,EAAEpB,EAAE,CAACS,OAAO,CAACC,EAAR,CAAWG,OAAZ,EAAqB,EAArB;AAF+B,KAAvB,CAApB;AAKA,WAAOL,WAAP;AACD;;AA/BiB;;AAkCpBa,MAAM,CAACC,OAAP,GAAiBnB,aAAjB","sourcesContent":["'use strict'\n\nconst id = require('../../id')\nconst DatadogSpanContext = require('../span_context')\n\nclass LogPropagator {\n  constructor (config) {\n    this._config = config\n  }\n\n  inject (spanContext, carrier) {\n    if (!carrier) return\n\n    carrier.dd = {}\n\n    if (spanContext) {\n      carrier.dd.trace_id = spanContext.toTraceId()\n      carrier.dd.span_id = spanContext.toSpanId()\n    }\n\n    if (this._config.service) carrier.dd.service = this._config.service\n    if (this._config.version) carrier.dd.version = this._config.version\n    if (this._config.env) carrier.dd.env = this._config.env\n  }\n\n  extract (carrier) {\n    if (!carrier || !carrier.dd || !carrier.dd.trace_id || !carrier.dd.span_id) {\n      return null\n    }\n\n    const spanContext = new DatadogSpanContext({\n      traceId: id(carrier.dd.trace_id, 10),\n      spanId: id(carrier.dd.span_id, 10)\n    })\n\n    return spanContext\n  }\n}\n\nmodule.exports = LogPropagator\n"]},"metadata":{},"sourceType":"script"}