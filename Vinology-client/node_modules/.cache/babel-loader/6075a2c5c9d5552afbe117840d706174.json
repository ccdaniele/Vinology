{"ast":null,"code":"'use strict';\n\nconst {\n  DDSketch\n} = require('@datadog/sketches-js');\n\nclass Histogram {\n  constructor() {\n    this.reset();\n  }\n\n  get min() {\n    return this._min;\n  }\n\n  get max() {\n    return this._max;\n  }\n\n  get avg() {\n    return this._count === 0 ? 0 : this._sum / this._count;\n  }\n\n  get sum() {\n    return this._sum;\n  }\n\n  get count() {\n    return this._count;\n  }\n\n  get median() {\n    return this.percentile(50);\n  }\n\n  get p95() {\n    return this.percentile(95);\n  }\n\n  percentile(percentile) {\n    return this._histogram.getValueAtQuantile(percentile / 100) || 0;\n  }\n\n  record(value) {\n    if (this._count === 0) {\n      this._min = this._max = value;\n    } else {\n      this._min = Math.min(this._min, value);\n      this._max = Math.max(this._max, value);\n    }\n\n    this._count++;\n    this._sum += value;\n\n    this._histogram.accept(value);\n  }\n\n  reset() {\n    this._min = 0;\n    this._max = 0;\n    this._sum = 0;\n    this._count = 0;\n    this._histogram = new DDSketch();\n  }\n\n}\n\nmodule.exports = Histogram;","map":{"version":3,"sources":["/Users/danielcalderon/vinology/Vinology-client/node_modules/dd-trace/packages/dd-trace/src/histogram.js"],"names":["DDSketch","require","Histogram","constructor","reset","min","_min","max","_max","avg","_count","_sum","sum","count","median","percentile","p95","_histogram","getValueAtQuantile","record","value","Math","accept","module","exports"],"mappings":"AAAA;;AAEA,MAAM;AAAEA,EAAAA;AAAF,IAAeC,OAAO,CAAC,sBAAD,CAA5B;;AAEA,MAAMC,SAAN,CAAgB;AACdC,EAAAA,WAAW,GAAI;AACb,SAAKC,KAAL;AACD;;AAEM,MAAHC,GAAG,GAAI;AAAE,WAAO,KAAKC,IAAZ;AAAkB;;AACxB,MAAHC,GAAG,GAAI;AAAE,WAAO,KAAKC,IAAZ;AAAkB;;AACxB,MAAHC,GAAG,GAAI;AAAE,WAAO,KAAKC,MAAL,KAAgB,CAAhB,GAAoB,CAApB,GAAwB,KAAKC,IAAL,GAAY,KAAKD,MAAhD;AAAwD;;AAC9D,MAAHE,GAAG,GAAI;AAAE,WAAO,KAAKD,IAAZ;AAAkB;;AACtB,MAALE,KAAK,GAAI;AAAE,WAAO,KAAKH,MAAZ;AAAoB;;AACzB,MAANI,MAAM,GAAI;AAAE,WAAO,KAAKC,UAAL,CAAgB,EAAhB,CAAP;AAA4B;;AACrC,MAAHC,GAAG,GAAI;AAAE,WAAO,KAAKD,UAAL,CAAgB,EAAhB,CAAP;AAA4B;;AAEzCA,EAAAA,UAAU,CAAEA,UAAF,EAAc;AACtB,WAAO,KAAKE,UAAL,CAAgBC,kBAAhB,CAAmCH,UAAU,GAAG,GAAhD,KAAwD,CAA/D;AACD;;AAEDI,EAAAA,MAAM,CAAEC,KAAF,EAAS;AACb,QAAI,KAAKV,MAAL,KAAgB,CAApB,EAAuB;AACrB,WAAKJ,IAAL,GAAY,KAAKE,IAAL,GAAYY,KAAxB;AACD,KAFD,MAEO;AACL,WAAKd,IAAL,GAAYe,IAAI,CAAChB,GAAL,CAAS,KAAKC,IAAd,EAAoBc,KAApB,CAAZ;AACA,WAAKZ,IAAL,GAAYa,IAAI,CAACd,GAAL,CAAS,KAAKC,IAAd,EAAoBY,KAApB,CAAZ;AACD;;AAED,SAAKV,MAAL;AACA,SAAKC,IAAL,IAAaS,KAAb;;AAEA,SAAKH,UAAL,CAAgBK,MAAhB,CAAuBF,KAAvB;AACD;;AAEDhB,EAAAA,KAAK,GAAI;AACP,SAAKE,IAAL,GAAY,CAAZ;AACA,SAAKE,IAAL,GAAY,CAAZ;AACA,SAAKG,IAAL,GAAY,CAAZ;AACA,SAAKD,MAAL,GAAc,CAAd;AAEA,SAAKO,UAAL,GAAkB,IAAIjB,QAAJ,EAAlB;AACD;;AAtCa;;AAyChBuB,MAAM,CAACC,OAAP,GAAiBtB,SAAjB","sourcesContent":["'use strict'\n\nconst { DDSketch } = require('@datadog/sketches-js')\n\nclass Histogram {\n  constructor () {\n    this.reset()\n  }\n\n  get min () { return this._min }\n  get max () { return this._max }\n  get avg () { return this._count === 0 ? 0 : this._sum / this._count }\n  get sum () { return this._sum }\n  get count () { return this._count }\n  get median () { return this.percentile(50) }\n  get p95 () { return this.percentile(95) }\n\n  percentile (percentile) {\n    return this._histogram.getValueAtQuantile(percentile / 100) || 0\n  }\n\n  record (value) {\n    if (this._count === 0) {\n      this._min = this._max = value\n    } else {\n      this._min = Math.min(this._min, value)\n      this._max = Math.max(this._max, value)\n    }\n\n    this._count++\n    this._sum += value\n\n    this._histogram.accept(value)\n  }\n\n  reset () {\n    this._min = 0\n    this._max = 0\n    this._sum = 0\n    this._count = 0\n\n    this._histogram = new DDSketch()\n  }\n}\n\nmodule.exports = Histogram\n"]},"metadata":{},"sourceType":"script"}