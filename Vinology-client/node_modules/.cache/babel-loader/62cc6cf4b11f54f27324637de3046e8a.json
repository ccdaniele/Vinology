{"ast":null,"code":"var _jsxFileName = \"/Users/daniel.calderon/Projects/vinilogy/vinology/Vinology-client/src/App.js\";\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport Home from './components/home.component';\nimport Nav from './components/nav.component';\nimport Register from './components/register.component';\nimport New from './components/newCar.component';\nimport Show from './components/showCar.component';\nimport Queries from './components/queries.component';\nimport Login from './components/login.component';\nimport NewQuery from './components/newQuery.component';\nimport Edit from './components/editQuery.component';\nimport Check from './components/check.component';\nimport { Route, Switch, withRouter } from 'react-router-dom';\nimport Report from './components/report.component';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { currentUser } from './actions/user.action';\nimport { myQueries } from './actions/query.action';\nimport './index.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass App extends Component {\n  constructor() {\n    super();\n    this.loadMyQueries = () => {\n      const queriesArray = [];\n      const user = this.props.user.id;\n      fetch(`${process.env.REACT_APP_API_ENDPOINT}:${process.env.REACT_APP_API_PORT}/api/v1/queries`).then(resp => resp.json()).then(data => {\n        queriesArray.push(data.filter(query => query.user_id === user));\n        this.props.myQueries(queriesArray);\n        console.log('queries from app');\n      });\n    };\n    this.state = {\n      currentUser: ''\n    };\n  }\n  componentDidMount() {\n    const token = localStorage.getItem('token');\n    console.log(process.env.REACT_APP_API_ENDPOINT, \"from here\");\n    if (!token) {\n      this.props.history.push('/login');\n    } else {\n      const reqObj = {\n        method: 'GET',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      };\n      fetch(`${process.env.REACT_APP_API_ENDPOINT}:${process.env.REACT_APP_API_PORT}/api/v1/current_user`, reqObj).then(resp => resp.json()).then(data => {\n        console.log(data, \"fetch app\");\n        if (data.error) {\n          this.props.history.push('/login');\n        } else {\n          this.props.currentUser(data);\n          this.loadMyQueries();\n        }\n      });\n    }\n  }\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Nav, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Switch, {\n        children: [/*#__PURE__*/_jsxDEV(Route, {\n          exact: true,\n          path: \"/\",\n          component: Home\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          exact: true,\n          path: \"/login\",\n          component: Login\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          exact: true,\n          path: \"/register\",\n          component: Register\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          exact: true,\n          path: \"/checkcode\",\n          component: Check\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          exact: true,\n          path: \"/newcar\",\n          component: New\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          exact: true,\n          path: \"/showcar\",\n          component: Show\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          exact: true,\n          path: \"/queries\",\n          component: Queries\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          exact: true,\n          path: \"/report\",\n          component: Report\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          exact: true,\n          path: \"/newquery\",\n          component: NewQuery\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          exact: true,\n          path: \"/edit\",\n          component: Edit\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 5\n    }, this);\n  }\n}\nconst mapDispathToProps = {\n  currentUser,\n  myQueries\n};\nconst mapStateToProps = state => {\n  return {\n    user: state.userData\n  };\n};\nexport default connect(mapStateToProps, mapDispathToProps)(withRouter(App));","map":{"version":3,"names":["Home","Nav","Register","New","Show","Queries","Login","NewQuery","Edit","Check","Route","Switch","withRouter","Report","React","Component","connect","currentUser","myQueries","App","constructor","loadMyQueries","queriesArray","user","props","id","fetch","process","env","REACT_APP_API_ENDPOINT","REACT_APP_API_PORT","then","resp","json","data","push","filter","query","user_id","console","log","state","componentDidMount","token","localStorage","getItem","history","reqObj","method","headers","error","render","mapDispathToProps","mapStateToProps","userData"],"sources":["/Users/daniel.calderon/Projects/vinilogy/vinology/Vinology-client/src/App.js"],"sourcesContent":["import 'bootstrap/dist/css/bootstrap.min.css';\nimport Home from './components/home.component';\nimport Nav from './components/nav.component'\nimport Register from './components/register.component'\nimport New from './components/newCar.component'\nimport Show from './components/showCar.component'\nimport Queries from './components/queries.component'\nimport Login from './components/login.component'\nimport NewQuery from './components/newQuery.component'\nimport Edit from './components/editQuery.component'\nimport Check from './components/check.component'\nimport {Route, Switch, withRouter} from 'react-router-dom'\nimport Report from './components/report.component';\nimport React, {Component} from 'react'\nimport {connect} from 'react-redux'\nimport {currentUser} from './actions/user.action'\nimport {myQueries} from './actions/query.action'\nimport './index.css';\n\nclass App extends Component{\n  constructor(){\n    super()\n    this.state={\n      currentUser: ''\n    }\n  }\n\n  loadMyQueries=()=>{\n    \n    const queriesArray = []\n    const user = this.props.user.id\n    \n    \n  \n    fetch(`${process.env.REACT_APP_API_ENDPOINT}:${process.env.REACT_APP_API_PORT}/api/v1/queries`)\n      .then(resp=>resp.json())\n      .then(data=>{\n     \n       \n        queriesArray.push(data.filter(query=>query.user_id === user))\n            this.props.myQueries(queriesArray) \n            console.log('queries from app')\n        })\n\n    }\n\n  componentDidMount(){\n\n    const token = localStorage.getItem('token')\n    console.log(process.env.REACT_APP_API_ENDPOINT,\"from here\")\n    if(!token) {this.props.history.push('/login')\n        \n    }else{\n  \n\n      const reqObj ={\n        method: 'GET',\n        headers: {\n          'Authorization': `Bearer ${token}` \n        }\n\n        }\n          \n      fetch(`${process.env.REACT_APP_API_ENDPOINT}:${process.env.REACT_APP_API_PORT}/api/v1/current_user`, reqObj)\n      .then(resp => resp.json())\n      .then(data=>{\n        console.log(data,\"fetch app\")\n                if (data.error){\n                this.props.history.push('/login')\n                }else{\n                 \n                this.props.currentUser(data)\n                this.loadMyQueries()\n                }\n            })\n    }\n   \n  }\n\nrender(){\n  \n  return (\n    <div>\n          <Nav/>\n            <Switch>\n              <Route exact path=\"/\" component={Home}/>\n              <Route exact path=\"/login\" component={Login}/>\n              <Route exact path=\"/register\" component={Register}/>\n              <Route exact path=\"/checkcode\" component={Check}/>\n              <Route exact path=\"/newcar\" component={New}/>\n              <Route exact path=\"/showcar\" component={Show}/>\n              <Route exact path=\"/queries\" component={Queries}/>\n              <Route exact path=\"/report\" component={Report}/>\n              <Route exact path=\"/newquery\" component={NewQuery}/>\n              <Route exact path=\"/edit\" component={Edit}/>\n            </Switch>\n    </div>\n  );\n}\n}\n\nconst mapDispathToProps ={\n\n  currentUser, myQueries\n}\n\nconst mapStateToProps = (state)=>{\n  return {\n    \n      user: state.userData\n  }\n}\n\n\nexport default connect (mapStateToProps, mapDispathToProps) (withRouter(App));\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}