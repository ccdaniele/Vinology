{"ast":null,"code":"'use strict';\n\nfunction createWrapRequest(tracer) {\n  const scope = tracer.scope();\n  return function wrapRequest(original) {\n    return function requestWithTrace(request, callback) {\n      const index = arguments.length - 1;\n      arguments[index] = scope.bind(arguments[index]);\n      return original.apply(this, arguments);\n    };\n  };\n}\n\nmodule.exports = [{\n  name: 'limitd-client',\n  versions: ['>=2.8'],\n\n  patch(LimitdClient, tracer) {\n    this.wrap(LimitdClient.prototype, '_directRequest', createWrapRequest(tracer));\n    this.wrap(LimitdClient.prototype, '_retriedRequest', createWrapRequest(tracer));\n  },\n\n  unpatch(LimitdClient) {\n    this.unwrap(LimitdClient.prototype, '_directRequest');\n    this.unwrap(LimitdClient.prototype, '_retriedRequest');\n  }\n\n}];","map":{"version":3,"sources":["/Users/danielcalderon/vinology/Vinology-client/node_modules/dd-trace/packages/datadog-plugin-limitd-client/src/index.js"],"names":["createWrapRequest","tracer","scope","wrapRequest","original","requestWithTrace","request","callback","index","arguments","length","bind","apply","module","exports","name","versions","patch","LimitdClient","wrap","prototype","unpatch","unwrap"],"mappings":"AAAA;;AAEA,SAASA,iBAAT,CAA4BC,MAA5B,EAAoC;AAClC,QAAMC,KAAK,GAAGD,MAAM,CAACC,KAAP,EAAd;AAEA,SAAO,SAASC,WAAT,CAAsBC,QAAtB,EAAgC;AACrC,WAAO,SAASC,gBAAT,CAA2BC,OAA3B,EAAoCC,QAApC,EAA8C;AACnD,YAAMC,KAAK,GAAGC,SAAS,CAACC,MAAV,GAAmB,CAAjC;AAEAD,MAAAA,SAAS,CAACD,KAAD,CAAT,GAAmBN,KAAK,CAACS,IAAN,CAAWF,SAAS,CAACD,KAAD,CAApB,CAAnB;AAEA,aAAOJ,QAAQ,CAACQ,KAAT,CAAe,IAAf,EAAqBH,SAArB,CAAP;AACD,KAND;AAOD,GARD;AASD;;AAEDI,MAAM,CAACC,OAAP,GAAiB,CACf;AACEC,EAAAA,IAAI,EAAE,eADR;AAEEC,EAAAA,QAAQ,EAAE,CAAC,OAAD,CAFZ;;AAGEC,EAAAA,KAAK,CAAEC,YAAF,EAAgBjB,MAAhB,EAAwB;AAC3B,SAAKkB,IAAL,CAAUD,YAAY,CAACE,SAAvB,EAAkC,gBAAlC,EAAoDpB,iBAAiB,CAACC,MAAD,CAArE;AACA,SAAKkB,IAAL,CAAUD,YAAY,CAACE,SAAvB,EAAkC,iBAAlC,EAAqDpB,iBAAiB,CAACC,MAAD,CAAtE;AACD,GANH;;AAOEoB,EAAAA,OAAO,CAAEH,YAAF,EAAgB;AACrB,SAAKI,MAAL,CAAYJ,YAAY,CAACE,SAAzB,EAAoC,gBAApC;AACA,SAAKE,MAAL,CAAYJ,YAAY,CAACE,SAAzB,EAAoC,iBAApC;AACD;;AAVH,CADe,CAAjB","sourcesContent":["'use strict'\n\nfunction createWrapRequest (tracer) {\n  const scope = tracer.scope()\n\n  return function wrapRequest (original) {\n    return function requestWithTrace (request, callback) {\n      const index = arguments.length - 1\n\n      arguments[index] = scope.bind(arguments[index])\n\n      return original.apply(this, arguments)\n    }\n  }\n}\n\nmodule.exports = [\n  {\n    name: 'limitd-client',\n    versions: ['>=2.8'],\n    patch (LimitdClient, tracer) {\n      this.wrap(LimitdClient.prototype, '_directRequest', createWrapRequest(tracer))\n      this.wrap(LimitdClient.prototype, '_retriedRequest', createWrapRequest(tracer))\n    },\n    unpatch (LimitdClient) {\n      this.unwrap(LimitdClient.prototype, '_directRequest')\n      this.unwrap(LimitdClient.prototype, '_retriedRequest')\n    }\n  }\n]\n"]},"metadata":{},"sourceType":"script"}