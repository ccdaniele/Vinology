{"ast":null,"code":"var _jsxFileName = \"/Vinology-client/src/components/login.component.js\";\nimport '../css/login.css';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { loginSuccess } from '../actions/user.action';\nimport { myQueries } from '../actions/query.action';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass Login extends Component {\n  constructor() {\n    super();\n    this.loadMyQueries = () => {\n      const queriesArray = [];\n      const user = this.props.user.id;\n      fetch('http://localhost:3000/api/v1/queries').then(resp => resp.json()).then(data => {\n        queriesArray.push(data.filter(query => query.user_id === user));\n        this.props.myQueries(queriesArray);\n        console.log('queries from login');\n      });\n    };\n    this.handleSubmit = e => {\n      e.preventDefault();\n      const newObj = {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          user: {\n            username: this.state.username,\n            password: this.state.password\n          }\n        })\n      };\n      this.setState({\n        username: '',\n        password: ''\n      });\n      fetch('http://localhost:3000//api/v1/login', newObj).then(resp => resp.json()).then(data => {\n        if (data.message) {\n          this.setState({\n            error: data.message\n          });\n          window.location.reload(false);\n        } else {\n          this.props.loginSuccess(data.user);\n          this.setState({\n            loginSuccess: data.user,\n            token: data.jwt\n          });\n          localStorage.setItem('token', data.jwt);\n          this.loadMyQueries();\n          this.props.history.push('/');\n        }\n      });\n    };\n    this.state = {\n      username: '',\n      password: '',\n      loginSuccess: \" \",\n      error: '',\n      queries: []\n    };\n  }\n  render() {\n    const size = {\n      height: 30,\n      width: 150\n    };\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"body-login\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"wrapper\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"inner-sign-up\",\n            children: [this.state.error ? /*#__PURE__*/_jsxDEV(\"h4\", {\n              style: {\n                color: 'white'\n              },\n              children: this.state.error\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 34\n            }, this) : null, /*#__PURE__*/_jsxDEV(\"form\", {\n              className: \"login-form\",\n              onSubmit: this.handleSubmit,\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                id: \"logoNav\",\n                style: size,\n                className: \"form-text\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 121,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"form-text\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 123,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  className: \"form-control\",\n                  placeholder: \"Username\",\n                  onChange: e => this.setState({\n                    username: e.target.value\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 124,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 122,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"form-text\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 128,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"password\",\n                  className: \"form-control\",\n                  placeholder: \"Password\",\n                  onChange: e => this.setState({\n                    password: e.target.value\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 129,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 127,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-secondary btn-block\",\n                children: \"Sign in\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 131,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 120,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 11\n    }, this);\n  }\n}\nconst mapStateToProps = state => {\n  return {\n    user: state.userData,\n    queries: state.queryData\n  };\n};\nconst mapDispatchToProps = {\n  loginSuccess,\n  myQueries\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(Login);","map":{"version":3,"names":["React","Component","connect","loginSuccess","myQueries","Login","constructor","loadMyQueries","queriesArray","user","props","id","fetch","then","resp","json","data","push","filter","query","user_id","console","log","handleSubmit","e","preventDefault","newObj","method","headers","body","JSON","stringify","username","state","password","setState","message","error","window","location","reload","token","jwt","localStorage","setItem","history","queries","render","size","height","width","color","target","value","mapStateToProps","userData","queryData","mapDispatchToProps"],"sources":["/Vinology-client/src/components/login.component.js"],"sourcesContent":["import '../css/login.css'\nimport React, {Component} from 'react'\nimport {connect} from 'react-redux'\nimport {loginSuccess} from '../actions/user.action'\nimport {myQueries} from '../actions/query.action'\n\n\n\n\n\n\n class Login extends Component {\n     constructor(){\n        super()\n        this.state={\n            username:'',\n            password:'',\n            loginSuccess:\" \",\n            error: '',\n            queries: [],\n        }\n        \n    }\n\n  \n\n    loadMyQueries=()=>{\n    \n    const queriesArray = []\n    const user = this.props.user.id\n    \n    \n  \n    fetch('http://localhost:3000/api/v1/queries')\n      .then(resp=>resp.json())\n      .then(data=>{\n     \n       \n        queriesArray.push(data.filter(query=>query.user_id === user))\n            this.props.myQueries(queriesArray) \n    console.log('queries from login')\n        })\n\n    }\n\n    handleSubmit = (e) =>{\n        e.preventDefault()\n    \n        const newObj = {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n              user: {\n                username: this.state.username,\n                password: this.state.password\n              }\n            })}\n          \n\n            this.setState({\n              username: '',\n              password: ''\n            })\n\n        fetch('http://localhost:3000//api/v1/login', newObj)\n          \n          .then(resp => resp.json())\n          .then(data => {\n            if (data.message) { \n              \n              this.setState({\n                error: data.message\n              })\n              window.location.reload(false);\n            } else {\n              this.props.loginSuccess(data.user)\n             \n      \n\n              this.setState({loginSuccess:data.user,\n            token:data.jwt})\n\n            localStorage.setItem('token',data.jwt)\n          \n            \n            this.loadMyQueries()\n            this.props.history.push('/')\n\n            }\n          })\n\n\n      }\n\n\n\n\n\n    render(){\n     \n  \n\n    const size ={\n      height: 30,\n      width: 150,\n      \n  }\n        return(\n\n          \n        \n          <div>\n          <div className='body-login' >\n          \n          <div className=\"wrapper\">\n            <div className=\"inner-sign-up\">\n              {this.state.error? <h4 style={{color:'white'}}>{this.state.error}</h4> : null}\n                <form className=\"login-form\" onSubmit={this.handleSubmit}>\n                    <p id='logoNav' style={size}className=\"form-text\"></p> \n                      <div className='form-group'>\n                          <label className=\"form-text\"></label>\n                        <input type='text' className='form-control' placeholder='Username' onChange={e=> this.setState({username: e.target.value})}/>\n                            \n                      </div>\n                      <div className='form-group'>\n                        <label  className=\"form-text\"></label>\n                      <input type='password' className='form-control' placeholder='Password' onChange={e=> this.setState({password: e.target.value})}/>\n                    </div>\n                  <button className='btn btn-secondary btn-block'>Sign in</button>\n                </form> \n            </div>\n          </div>\n          </div>\n          \n          </div>          \n\n        )\n    }\n}\n\nconst mapStateToProps = (state)=>{\n  return {\n      user: state.userData,\n      queries: state.queryData\n  }\n}\n\nconst mapDispatchToProps = {\n    loginSuccess, myQueries\n}\n\n\n\nexport default connect (mapStateToProps, mapDispatchToProps)(Login)\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}