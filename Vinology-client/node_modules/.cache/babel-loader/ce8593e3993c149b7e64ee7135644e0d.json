{"ast":null,"code":"'use strict';\n\nconst {\n  AsyncLocalStorage\n} = require('async_hooks');\n\nconst Base = require('./base');\n\nlet singleton = null;\n\nclass Scope extends Base {\n  constructor() {\n    if (singleton) return singleton;\n    super();\n    singleton = this;\n    this._storage = new AsyncLocalStorage();\n  }\n\n  _active() {\n    const store = this._storage.getStore();\n\n    return typeof store === 'undefined' ? null : store;\n  }\n\n  _activate(span, callback) {\n    return this._storage.run(span, callback);\n  }\n\n}\n\nmodule.exports = Scope;","map":{"version":3,"sources":["/Users/danielcalderon/vinology/Vinology-client/node_modules/dd-trace/packages/dd-trace/src/scope/async_local_storage.js"],"names":["AsyncLocalStorage","require","Base","singleton","Scope","constructor","_storage","_active","store","getStore","_activate","span","callback","run","module","exports"],"mappings":"AAAA;;AAEA,MAAM;AAAEA,EAAAA;AAAF,IAAwBC,OAAO,CAAC,aAAD,CAArC;;AACA,MAAMC,IAAI,GAAGD,OAAO,CAAC,QAAD,CAApB;;AAEA,IAAIE,SAAS,GAAG,IAAhB;;AAEA,MAAMC,KAAN,SAAoBF,IAApB,CAAyB;AACvBG,EAAAA,WAAW,GAAI;AACb,QAAIF,SAAJ,EAAe,OAAOA,SAAP;AAEf;AAEAA,IAAAA,SAAS,GAAG,IAAZ;AAEA,SAAKG,QAAL,GAAgB,IAAIN,iBAAJ,EAAhB;AACD;;AAEDO,EAAAA,OAAO,GAAI;AACT,UAAMC,KAAK,GAAG,KAAKF,QAAL,CAAcG,QAAd,EAAd;;AACA,WAAO,OAAOD,KAAP,KAAiB,WAAjB,GAA+B,IAA/B,GAAsCA,KAA7C;AACD;;AAEDE,EAAAA,SAAS,CAAEC,IAAF,EAAQC,QAAR,EAAkB;AACzB,WAAO,KAAKN,QAAL,CAAcO,GAAd,CAAkBF,IAAlB,EAAwBC,QAAxB,CAAP;AACD;;AAlBsB;;AAqBzBE,MAAM,CAACC,OAAP,GAAiBX,KAAjB","sourcesContent":["'use strict'\n\nconst { AsyncLocalStorage } = require('async_hooks')\nconst Base = require('./base')\n\nlet singleton = null\n\nclass Scope extends Base {\n  constructor () {\n    if (singleton) return singleton\n\n    super()\n\n    singleton = this\n\n    this._storage = new AsyncLocalStorage()\n  }\n\n  _active () {\n    const store = this._storage.getStore()\n    return typeof store === 'undefined' ? null : store\n  }\n\n  _activate (span, callback) {\n    return this._storage.run(span, callback)\n  }\n}\n\nmodule.exports = Scope\n"]},"metadata":{},"sourceType":"script"}