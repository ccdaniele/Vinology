{"ast":null,"code":"'use strict';\n\nconst log = require('../../log');\n\nconst urlFilter = {\n  getFilter(config) {\n    if (typeof config.filter === 'function') {\n      return config.filter;\n    } else if (config.hasOwnProperty('filter')) {\n      log.error('Expected `filter` to be a function. Overriding filter property to default.');\n    }\n\n    const allowlist = config.allowlist || config.whitelist || /.*/;\n    const blocklist = config.blocklist || config.blacklist || [];\n    return uri => {\n      const allowed = applyFilter(allowlist, uri);\n      const blocked = applyFilter(blocklist, uri);\n      return allowed && !blocked;\n    };\n\n    function applyFilter(filter, uri) {\n      if (typeof filter === 'function') {\n        return filter(uri);\n      } else if (filter instanceof RegExp) {\n        return filter.test(uri);\n      } else if (filter instanceof Array) {\n        return filter.some(filter => applyFilter(filter, uri));\n      }\n\n      return filter === uri;\n    }\n  }\n\n};\nmodule.exports = urlFilter;","map":{"version":3,"sources":["/Users/danielcalderon/vinology/Vinology-client/node_modules/dd-trace/packages/dd-trace/src/plugins/util/urlfilter.js"],"names":["log","require","urlFilter","getFilter","config","filter","hasOwnProperty","error","allowlist","whitelist","blocklist","blacklist","uri","allowed","applyFilter","blocked","RegExp","test","Array","some","module","exports"],"mappings":"AAAA;;AAEA,MAAMA,GAAG,GAAGC,OAAO,CAAC,WAAD,CAAnB;;AAEA,MAAMC,SAAS,GAAG;AAChBC,EAAAA,SAAS,CAAEC,MAAF,EAAU;AACjB,QAAI,OAAOA,MAAM,CAACC,MAAd,KAAyB,UAA7B,EAAyC;AACvC,aAAOD,MAAM,CAACC,MAAd;AACD,KAFD,MAEO,IAAID,MAAM,CAACE,cAAP,CAAsB,QAAtB,CAAJ,EAAqC;AAC1CN,MAAAA,GAAG,CAACO,KAAJ,CAAU,4EAAV;AACD;;AAED,UAAMC,SAAS,GAAGJ,MAAM,CAACI,SAAP,IAAoBJ,MAAM,CAACK,SAA3B,IAAwC,IAA1D;AACA,UAAMC,SAAS,GAAGN,MAAM,CAACM,SAAP,IAAoBN,MAAM,CAACO,SAA3B,IAAwC,EAA1D;AAEA,WAAOC,GAAG,IAAI;AACZ,YAAMC,OAAO,GAAGC,WAAW,CAACN,SAAD,EAAYI,GAAZ,CAA3B;AACA,YAAMG,OAAO,GAAGD,WAAW,CAACJ,SAAD,EAAYE,GAAZ,CAA3B;AACA,aAAOC,OAAO,IAAI,CAACE,OAAnB;AACD,KAJD;;AAMA,aAASD,WAAT,CAAsBT,MAAtB,EAA8BO,GAA9B,EAAmC;AACjC,UAAI,OAAOP,MAAP,KAAkB,UAAtB,EAAkC;AAChC,eAAOA,MAAM,CAACO,GAAD,CAAb;AACD,OAFD,MAEO,IAAIP,MAAM,YAAYW,MAAtB,EAA8B;AACnC,eAAOX,MAAM,CAACY,IAAP,CAAYL,GAAZ,CAAP;AACD,OAFM,MAEA,IAAIP,MAAM,YAAYa,KAAtB,EAA6B;AAClC,eAAOb,MAAM,CAACc,IAAP,CAAYd,MAAM,IAAIS,WAAW,CAACT,MAAD,EAASO,GAAT,CAAjC,CAAP;AACD;;AAED,aAAOP,MAAM,KAAKO,GAAlB;AACD;AACF;;AA5Be,CAAlB;AA+BAQ,MAAM,CAACC,OAAP,GAAiBnB,SAAjB","sourcesContent":["'use strict'\n\nconst log = require('../../log')\n\nconst urlFilter = {\n  getFilter (config) {\n    if (typeof config.filter === 'function') {\n      return config.filter\n    } else if (config.hasOwnProperty('filter')) {\n      log.error('Expected `filter` to be a function. Overriding filter property to default.')\n    }\n\n    const allowlist = config.allowlist || config.whitelist || /.*/\n    const blocklist = config.blocklist || config.blacklist || []\n\n    return uri => {\n      const allowed = applyFilter(allowlist, uri)\n      const blocked = applyFilter(blocklist, uri)\n      return allowed && !blocked\n    }\n\n    function applyFilter (filter, uri) {\n      if (typeof filter === 'function') {\n        return filter(uri)\n      } else if (filter instanceof RegExp) {\n        return filter.test(uri)\n      } else if (filter instanceof Array) {\n        return filter.some(filter => applyFilter(filter, uri))\n      }\n\n      return filter === uri\n    }\n  }\n}\n\nmodule.exports = urlFilter\n"]},"metadata":{},"sourceType":"script"}